import{r as F,S as z,h as G,j as e,f as s}from"./index-DjdYpa2W.js";import{u as K,y as Q}from"./Layout-CC_gf8s-.js";import{e as E}from"./exportFromJSON-fDIoOtpr.js";import{a as W}from"./toast-DjDqlBK5.js";import{u as X}from"./useAsync-ZUR2i2Lf.js";import{u as Y}from"./useFilter--Mhb52Fo.js";import{O as L}from"./OrderServices-CC6fDNVZ.js";import{N as Z}from"./NotFound-B98lRYvl.js";import{P as ee}from"./PageTitle-H6vnBSo9.js";import{O as se}from"./OrderTable-Cjd2Ahaf.js";import{T as te}from"./TableLoading-u8ybCk9T.js";import{s as le}from"./spinner-CkndCogW.js";import{A as re}from"./AnimatedContent-Dramat6q.js";import"./iconBase-TplbiNF9.js";import"./logo-color-CF1h2kui.js";import"./browser-DDvgk3Ro.js";import"./index--JtT38Uf.js";import"./useDisableForDemo-C6HHjxCb.js";import"./ProductServices-CJRh4QM3.js";import"./CouponServices-Bq0cN76W.js";import"./CurrencyServices-SLwyUqNy.js";import"./Status-BsaAPHZW.js";import"./Tooltip-kLpuPd-Y.js";import"./index-DN-g2YOX.js";import"./SelectStatus-CiUDd36x.js";const Ae=()=>{var O,D,S,P;const{time:m,setTime:x,status:u,endDate:p,setStatus:g,setEndDate:j,startDate:b,currentPage:I,searchText:v,searchRef:f,method:y,setMethod:C,setStartDate:T,setSearchText:M,handleChangePage:R,handleSubmitForAll:B,resultsPerPage:w}=F.useContext(z),{t}=G(),[d,c]=F.useState(!1),{data:l,loading:_,error:N}=X(()=>L.getAllOrders({day:m,method:y,status:u,page:I,endDate:p,startDate:b,limit:w,customerName:v})),{currency:V,getNumber:H,getNumberTwo:n}=K(),{dataTable:J,serviceData:h}=Y(l==null?void 0:l.orders),U=async()=>{var r,o,A;try{c(!0);const i=await L.getAllOrders({page:1,day:m,method:y,status:u,endDate:p,download:!0,startDate:b,limit:l==null?void 0:l.totalDoc,customerName:v}),q=(r=i==null?void 0:i.orders)==null?void 0:r.map(a=>{var k;return{_id:a._id,invoice:a.invoice,subTotal:n(a.subTotal),shippingCost:n(a.shippingCost),discount:n(a==null?void 0:a.discount),total:n(a.total),paymentMethod:a.paymentMethod,status:a.status,user_info:(k=a==null?void 0:a.user_info)==null?void 0:k.name,createdAt:a.createdAt,updatedAt:a.updatedAt}});E({data:q,fileName:"orders",exportType:E.types.csv}),c(!1)}catch(i){c(!1),W(((A=(o=i==null?void 0:i.response)==null?void 0:o.data)==null?void 0:A.message)||(i==null?void 0:i.message))}},$=()=>{x(""),C(""),g(""),j(""),T(""),M(""),f.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:t("Orders")}),e.jsx(re,{children:e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("form",{onSubmit:B,children:[e.jsxs("div",{className:"grid gap-4 lg:gap-4 xl:gap-6 md:gap-2 md:grid-cols-5 py-2",children:[e.jsx("div",{children:e.jsx(s.Input,{ref:f,type:"search",name:"search",placeholder:"Search by Customer Name"})}),e.jsx("div",{children:e.jsxs(s.Select,{onChange:r=>g(r.target.value),children:[e.jsx("option",{value:"Status",defaultValue:!0,hidden:!0,children:t("Status")}),e.jsx("option",{value:"Delivered",children:t("PageOrderDelivered")}),e.jsx("option",{value:"Pending",children:t("PageOrderPending")}),e.jsx("option",{value:"Processing",children:t("PageOrderProcessing")}),e.jsx("option",{value:"Cancel",children:t("OrderCancel")})]})}),e.jsx("div",{children:e.jsxs(s.Select,{onChange:r=>x(r.target.value),children:[e.jsx("option",{value:"Order limits",defaultValue:!0,hidden:!0,children:t("Orderlimits")}),e.jsx("option",{value:"5",children:t("DaysOrders5")}),e.jsx("option",{value:"7",children:t("DaysOrders7")}),e.jsx("option",{value:"15",children:t("DaysOrders15")}),e.jsx("option",{value:"30",children:t("DaysOrders30")})]})}),e.jsx("div",{children:e.jsxs(s.Select,{onChange:r=>C(r.target.value),children:[e.jsx("option",{value:"Method",defaultValue:!0,hidden:!0,children:t("Method")}),e.jsx("option",{value:"Cash",children:t("Cash")}),e.jsx("option",{value:"Card",children:t("Card")}),e.jsx("option",{value:"Credit",children:t("Credit")})]})}),e.jsx("div",{children:d?e.jsxs(s.Button,{disabled:!0,type:"button",className:"h-12 w-full",children:[e.jsx("img",{src:le,alt:"Loading",width:20,height:10})," ",e.jsx("span",{className:"font-serif ml-2 font-light",children:"Processing"})]}):e.jsxs("button",{onClick:U,disabled:((O=l==null?void 0:l.orders)==null?void 0:O.length)<=0||d,type:"button",className:`${(((D=l==null?void 0:l.orders)==null?void 0:D.length)<=0||d)&&"opacity-50 cursor-not-allowed bg-blue-500"} flex items-center justify-center text-sm leading-5 h-12 w-full text-center transition-colors duration-150 font-medium px-6 py-2 rounded-lg text-white bg-blue-500 border border-transparent active:bg-blue-600 hover:bg-blue-600 shadow-sm hover:shadow-md `,children:["Download All Orders",e.jsx("span",{className:"ml-2 text-base",children:e.jsx(Q,{})})]})})]}),e.jsxs("div",{className:"grid gap-4 lg:gap-6 xl:gap-6 lg:grid-cols-3 xl:grid-cols-3 md:grid-cols-3 sm:grid-cols-1 py-2",children:[e.jsxs("div",{children:[e.jsx(s.Label,{children:"Start Date"}),e.jsx(s.Input,{type:"date",name:"startDate",onChange:r=>T(r.target.value)})]}),e.jsxs("div",{children:[e.jsx(s.Label,{children:"End Date"}),e.jsx(s.Input,{type:"date",name:"startDate",onChange:r=>j(r.target.value)})]}),e.jsxs("div",{className:"mt-2 md:mt-0 flex items-center xl:gap-x-4 gap-x-1 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsxs("div",{className:"w-full mx-1",children:[e.jsx(s.Label,{style:{visibility:"hidden"},children:"Filter"}),e.jsx(s.Button,{type:"submit",className:"h-12 w-full bg-blue-500 hover:bg-blue-600 rounded-lg shadow-sm hover:shadow-md",children:"Filter"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(s.Label,{style:{visibility:"hidden"},children:"Reset"}),e.jsx(s.Button,{layout:"outline",onClick:$,type:"reset",className:"px-4 md:py-1 py-3 text-sm dark:bg-slate-700 bg-slate-100 border-slate-300 dark:border-slate-600",children:e.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:"Reset"})})]})]})]})]})})})}),((S=l==null?void 0:l.methodTotals)==null?void 0:S.length)>0&&e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-t-lg rounded-0 mb-4",children:e.jsx(s.CardBody,{children:e.jsx("div",{className:"flex gap-1",children:(P=l==null?void 0:l.methodTotals)==null?void 0:P.map((r,o)=>e.jsx("div",{className:"dark:text-slate-300",children:(r==null?void 0:r.method)&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"font-medium",children:[" ",r.method]})," :"," ",e.jsxs("span",{className:"font-semibold mr-2",children:[V,H(r.total)]})]})},o+1))})})}),_?e.jsx(te,{row:12,col:7,width:160,height:20}):N?e.jsx("span",{className:"text-center mx-auto text-red-500",children:N}):(h==null?void 0:h.length)!==0?e.jsxs(s.TableContainer,{className:"mb-8 dark:bg-gray-900",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:t("InvoiceNo")}),e.jsx(s.TableCell,{children:t("TimeTbl")}),e.jsx(s.TableCell,{children:t("CustomerName")}),e.jsx(s.TableCell,{children:t("MethodTbl")}),e.jsx(s.TableCell,{children:t("AmountTbl")}),e.jsx(s.TableCell,{children:t("OderStatusTbl")}),e.jsx(s.TableCell,{children:t("ActionTbl")}),e.jsx(s.TableCell,{className:"text-right",children:t("InvoiceTbl")})]})}),e.jsx(se,{orders:J})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:l==null?void 0:l.totalDoc,resultsPerPage:w,onChange:R,label:"Table navigation"})})]}):e.jsx(Z,{title:"Sorry, There are no orders right now."})]})};export{Ae as default};
