import{h as C,q as T,r as c,S as P,j as e,f as t}from"./index-DjdYpa2W.js";import{J as S}from"./Layout-CC_gf8s-.js";import{u as R}from"./useAsync-ZUR2i2Lf.js";import{u as k}from"./useFilter--Mhb52Fo.js";import{M as A}from"./MainDrawer-C792pCvG.js";import{P as E}from"./ProductReviewServices-AfLdZV_w.js";import{P as F}from"./PageTitle-H6vnBSo9.js";import{A as H}from"./AnimatedContent-Dramat6q.js";import{T as L}from"./TableLoading-u8ybCk9T.js";import{N as M}from"./NotFound-B98lRYvl.js";import"./iconBase-TplbiNF9.js";import"./logo-color-CF1h2kui.js";import"./browser-DDvgk3Ro.js";import"./index--JtT38Uf.js";import"./useDisableForDemo-C6HHjxCb.js";import"./toast-DjDqlBK5.js";import"./ProductServices-CJRh4QM3.js";import"./CouponServices-Bq0cN76W.js";import"./CurrencyServices-SLwyUqNy.js";const te=()=>{const{t:i}=C(),j=T();c.useContext(P);const[d,f]=c.useState(""),[p,m]=c.useState([]),{data:r,loading:b,error:g}=R(E.getAllProductsWithReviews),{handleChangePage:y,totalResults:u,resultsPerPage:N,dataTable:x,serviceData:h,currentPage:B}=k(p);c.useEffect(()=>{r!=null&&r.products&&m(r.products)},[r]),c.useEffect(()=>{var s;if(d){const n=(s=r==null?void 0:r.products)==null?void 0:s.filter(l=>{var a;return(typeof l.title=="string"?l.title:((a=l.title)==null?void 0:a.en)||"").toLowerCase().includes(d.toLowerCase())});m(n||[])}else m((r==null?void 0:r.products)||[])},[d,r]);const v=s=>{j.push(`/product-reviews/${s}`)},w=s=>{const n=[],l=Math.floor(s),o=s%1!==0;for(let a=0;a<5;a++)a<l?n.push(e.jsx("span",{className:"text-yellow-400",children:"★"},a)):a===l&&o?n.push(e.jsx("span",{className:"text-yellow-400",children:"½"},a)):n.push(e.jsx("span",{className:"text-gray-300",children:"★"},a));return n};return e.jsxs(e.Fragment,{children:[e.jsx(F,{children:i("ProductComments")}),e.jsx(A,{product:!0}),e.jsx(H,{children:e.jsx(t.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(t.CardBody,{children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsx(t.Input,{"aria-label":"Search",className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 border-transparent focus:bg-white",type:"search",name:"search",placeholder:i("SearchProduct"),value:d,onChange:s=>f(s.target.value)})}),e.jsx("div",{className:"mt-4 md:mt-0 md:ml-4",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Total Products: ",u]})})]})})})}),b?e.jsx(L,{row:12,col:6,width:160,height:20}):g?e.jsx("span",{className:"text-center mx-auto text-red-500",children:g}):(h==null?void 0:h.length)!==0?e.jsxs(t.TableContainer,{className:"mb-8 rounded-b-lg",children:[e.jsxs(t.Table,{children:[e.jsx(t.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(t.TableCell,{children:i("ProductImage")}),e.jsx(t.TableCell,{children:i("ProductName")}),e.jsx(t.TableCell,{children:i("TotalReviews")}),e.jsx(t.TableCell,{children:i("AverageRating")}),e.jsx(t.TableCell,{className:"text-center",children:i("Actions")})]})}),x==null?void 0:x.map((s,n)=>{var o;const l=typeof s.title=="string"?s.title:((o=s.title)==null?void 0:o.en)||"N/A";return e.jsx("tbody",{className:"bg-white divide-y divide-gray-100 dark:divide-gray-700 dark:bg-gray-800 text-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx(t.TableCell,{children:e.jsx("div",{className:"flex items-center",children:s.image&&s.image[0]?e.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:s.image[0],alt:l}):e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-200 dark:bg-gray-600"})})}),e.jsx(t.TableCell,{children:e.jsx("span",{className:"text-sm font-medium",children:l})}),e.jsx(t.TableCell,{children:e.jsx("span",{className:"text-sm",children:s.totalReviews||0})}),e.jsx(t.TableCell,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex text-lg",children:w(parseFloat(s.averageRating))}),e.jsx("span",{className:"text-sm font-semibold",children:s.averageRating})]})}),e.jsx(t.TableCell,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(t.Button,{onClick:()=>v(s._id),className:"p-2 cursor-pointer text-gray-400 hover:text-blue-600",layout:"link",children:e.jsx(S,{className:"text-xl"})})})})]})},s._id)})]}),e.jsx(t.TableFooter,{children:e.jsx(t.Pagination,{totalResults:u,resultsPerPage:N,onChange:y,label:"Table navigation"})})]}):e.jsx(M,{title:"Product"})]})};export{te as default};
